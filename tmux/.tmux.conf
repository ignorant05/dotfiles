# List of plugins
set -g @plugin 'tmux-plugins/tpm'
# set -g @plugin 'tmux-plugins/tmux-sensible'
# set -g @plugin 'christoomey/vim-tmux-navigator'

# set -g @plugin 'catppuccin/tmux#v2.1.2' # See https://github.com/catppuccin/tmux/tags for additional tags

#set-option -g default-terminal "tmux-256color"
run-shell ~/.kitty_colors.sh
set-option -g default-terminal "xterm-kitty"
set-option -ga terminal-overrides ",xterm-kitty:Tc"
set -as terminal-overrides ',xterm*:RGB' 
set -g @plugin 'jarvick257/pywal-tmux'
#set -g @plugin 'fabioluciano/tmux-tokyo-night'

unbind M-b
set -g prefix M-e
bind M-e send-prefix

## Move to the right window
# bind-key -n M-l next-window
# bind-key -n M-j next-window
#
# bind -n M-k next-window
# bind -n M-h previous-window

unbind-key -n d 
unbind-key -n q 
unbind-key -n s 
unbind-key -n f 
unbind-key -n g 
unbind-key -n b 

bind-key d command-prompt "rename-window %1"

## Rename session
bind-key s command-prompt "rename-session %1"

bind-key l next-window
bind-key h previous-window
bind-key i choose-tree

bind-key f new-window
unbind c

## Kill window 
unbind q
unbind-key -n q
bind-key b kill-window

## Kill session 
bind-key g kill-session

## Sourcing configuration file 
bind-key r source-file ~/.tmux.conf \; display-message "Sourced tmux successfully"

# bind-key -n M-l send-keys Right
# bind-key -n M-h send-keys Left 
#
# bind-key -n M-j send-keys Up
# bind-key -n M-k send-keys Down
#
set -g status-style "" 
# Options to make tmux more pleasant
set -g mouse on
set -g set-titles on
set -sg escape-time 0

set -g status-fg colour250

# Left status configuration
set -g status-left-length 100 # Allow for long session names in the left status
set -g status-left '#[fg=#ffffed]#{?client_prefix,#[fg=#9D2235],} ● ' # Show prefix key indicator
set -ga status-left '#[fg=#bd162c] █' # Display session name    
set -ga status-left '#[bg=#bd162c,fg=#ffffed]   #S ' # Display session name    
set -ga status-left '#[fg=#bd162c,bg=#1f2022]█ ' # Display session name    

set -g status-right '#[fg=#ffffed] 󰃭 %Y-%m-%d 󱑃 %H:%M ' # Show current date and time
set -ga status-right '#[bg=#1f2022,fg=#bd162c] █'
set -ga status-right '#[bg=#bd162c,fg=#ffffed] '
set -ga status-right '#[bg=#1f2022,fg=#bd162c]█'
set -ga status-right '#[bg=#bd162c,fg=#ffffed] #(whoami) ' # Show current user
set -ga status-right '#[bg=#1f2022,fg=#bd162c]█'  

# Split borders configuration
set -g pane-border-style fg=colour239  # Darker gray for inactive panes
set -g pane-active-border-style fg=#987afb  

setw -g window-status-format ' #[fg=#ffffed]#I #[fg=#ffffed]#W '
# For active window
# setw -g window-status-current-format '#[bg=colour239,fg=#987afb]' # Left rounded icon
setw -g window-status-current-format '#[fg=#ffffed,bg=#1f2022]█' # Left rounded icon
setw -ga window-status-current-format '#[bg=#ffffed,fg=#1f2022]#I' # Window ID
setw -ga window-status-current-format '#{?window_zoomed_flag, 󰘖,} ⊱⊱⊱' # Zoom icon
setw -ga window-status-current-format ' #W' # Window name
setw -ga window-status-current-format '#[fg=#ffffed,bg=#1f2022]█' # Right rounded icon
# setw -ga window-status-current-format '#[bg=colour239,fg=#987afb]' # Right rounded icon

set-option -g status-position top 
 
set -sg terminal-overrides ",*:RGB"

set -g @catppuccin_flavor "mocha"
set -g @catppuccin_window_status_style "rounded"
set -g status-style bg=colour235

run ~/.config/tmux/plugins/tmux-plugins/tmux-cpu/cpu.tmux
run ~/.config/tmux/plugins/tmux-plugins/tmux-battery/battery.tmux

# bind M-s display-popup -E -w 75% -h 75% "\
#   tmux list-sessions -F '#{?session_attached,,#{session_name}}' |\
#   sed '/^$/d' |\
#   fzf --reverse --header jump-to-session --preview 'tmux capture-pane -pt {}'  |\
#   xargs tmux switch-client -t"
#
# bind M-S display-popup -E "\
#     tmux list-sessions -F '#{?session_attached,,#{session_name}}' |\
#     fzf --reverse -m --header=kill-session |\
#     xargs -I {} tmux kill-session -t {}"
#
# bind s choose-tree -Zs -O time -F "#{session_windows}"
# #
# bind -n d if -F '#{==:#{pane_mode},tree-mode}' 'send x' 'send d'
#
# run-shell "~/github/dotfiles-latest/tmux/tools/linkarzu/set_tmux_colors.sh"
#
set -g @catppuccin_status_fill "all"

set -g @catppuccin_status_default "on"

set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @continuum-restore 'on'
set -g @continuum-save-interval '5'

run '~/.tmux/plugins/tpm/tpm'

#
#
# set -g @plugin 'christoomey/vim-tmux-navigator'
#
# set -g @vim_navigator_mapping_left "M-Left M-h"  # use C-h and C-Left
# set -g @vim_navigator_mapping_right "M-Right M-l"
# set -g @vim_navigator_mapping_up "M-k"
# set -g @vim_navigator_mapping_down "M-j"
# set -g @vim_navigator_mapping_prev ""  # removes the C-\ binding
